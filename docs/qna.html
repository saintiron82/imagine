<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Q&A — Imagine</title>
<meta name="description" content="Ask questions and discuss with the Imagine community.">
<meta name="theme-color" content="#0a0a1a">
<link rel="icon" href="icon.svg" type="image/svg+xml">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="common.css">
<style>
/* ── Page Layout ─────────────────────────────────────── */
.page-header {
  padding-top: 120px; padding-bottom: 20px;
  text-align: center;
}
.page-header h1 {
  font-size: clamp(2rem, 5vw, 3rem);
  font-weight: 700; margin-bottom: 8px;
}
.page-header p {
  color: #9ca3bf; font-size: 1.05rem;
  max-width: 560px; margin: 0 auto;
}

/* ── Giscus Container ────────────────────────────────── */
.giscus-container {
  max-width: 800px;
  margin: 40px auto 100px;
  padding: 0 24px;
}
.giscus-notice {
  text-align: center; padding: 40px 24px;
  color: #6b7280; font-size: 0.9rem;
}
.giscus-notice a {
  color: #38bdf8; text-decoration: underline;
}
.giscus-notice a:hover { color: #818cf8; }

/* ── Info Cards ──────────────────────────────────────── */
.info-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px; max-width: 800px;
  margin: 0 auto 40px; padding: 0 24px;
}
.info-card {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px; padding: 20px;
  text-align: center;
}
.info-card .icon { font-size: 1.8rem; margin-bottom: 8px; }
.info-card h3 { font-size: 0.9rem; font-weight: 600; margin-bottom: 4px; color: #e0e0ee; }
.info-card p { font-size: 0.8rem; color: #6b7280; }
</style>
</head>
<body>

<div class="ambient"></div>

<!-- Nav -->
<nav>
  <div class="nav-inner">
    <a href="index.html" class="nav-brand">
      <img src="icon.svg" alt="Imagine">
      <span>Imagine</span>
    </a>
    <div class="nav-links">
      <a href="releases.html" class="nav-page-link" data-i18n="nav.releases">Releases</a>
      <a href="guide.html" class="nav-page-link" data-i18n="nav.guide">Guide</a>
      <a href="qna.html" class="nav-page-link" data-i18n="nav.qna">Q&A</a>
      <a href="index.html#download" class="nav-page-link" data-i18n="nav.download">Download</a>
      <div class="lang-toggle">
        <button class="lang-btn active" onclick="setLang('en')">EN</button>
        <button class="lang-btn" onclick="setLang('ko')">KO</button>
      </div>
    </div>
  </div>
</nav>

<!-- Header -->
<div class="page-header container">
  <h1><span class="gradient-text" data-i18n="qna.title">Q&A</span></h1>
  <p data-i18n="qna.subtitle">Ask questions, share tips, and discuss with the community</p>
</div>

<!-- Info Cards -->
<div class="info-cards">
  <div class="info-card">
    <div class="icon">&#128172;</div>
    <h3 data-i18n="qna.ask">Ask a Question</h3>
    <p data-i18n="qna.ask_desc">Sign in with GitHub to post</p>
  </div>
  <div class="info-card">
    <div class="icon">&#128161;</div>
    <h3 data-i18n="qna.discuss">Discuss</h3>
    <p data-i18n="qna.discuss_desc">Share ideas and solutions</p>
  </div>
  <div class="info-card">
    <div class="icon">&#9989;</div>
    <h3 data-i18n="qna.answer">Get Answers</h3>
    <p data-i18n="qna.answer_desc">Community-driven support</p>
  </div>
</div>

<!-- Giscus Widget Container -->
<div class="giscus-container" id="giscus-container">
  <!-- Giscus will be injected here -->
</div>

<!-- Footer -->
<footer>
  <div class="container">
    <p>&copy; 2026 Imagine &middot; Open Source &middot; Apache 2.0</p>
  </div>
</footer>

<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
<script src="common.js"></script>

<script>
/* ── Page i18n ───────────────────────────────────────── */
registerPageI18n({
  en: {
    "qna.title": "Q&A",
    "qna.subtitle": "Ask questions, share tips, and discuss with the community",
    "qna.ask": "Ask a Question",
    "qna.ask_desc": "Sign in with GitHub to post",
    "qna.discuss": "Discuss",
    "qna.discuss_desc": "Share ideas and solutions",
    "qna.answer": "Get Answers",
    "qna.answer_desc": "Community-driven support",
    "qna.setup_needed": "Giscus setup required. Enable GitHub Discussions in the repository and configure at"
  },
  ko: {
    "qna.title": "Q&A",
    "qna.subtitle": "\uc9c8\ubb38\ud558\uace0, \ud301\uc744 \uacf5\uc720\ud558\uace0, \ucee4\ubba4\ub2c8\ud2f0\uc640 \ub300\ud654\ud558\uc138\uc694",
    "qna.ask": "\uc9c8\ubb38\ud558\uae30",
    "qna.ask_desc": "GitHub\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uc5ec \uc791\uc131",
    "qna.discuss": "\ud1a0\ub860",
    "qna.discuss_desc": "\uc544\uc774\ub514\uc5b4\uc640 \ud574\uacb0\ucc45 \uacf5\uc720",
    "qna.answer": "\ub2f5\ubcc0 \ubc1b\uae30",
    "qna.answer_desc": "\ucee4\ubba4\ub2c8\ud2f0 \uae30\ubc18 \uc9c0\uc6d0",
    "qna.setup_needed": "Giscus \uc124\uc815\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\uc5d0\uc11c GitHub Discussions\ub97c \ud65c\uc131\ud654\ud558\uace0 \ub2e4\uc74c\uc5d0\uc11c \uc124\uc815\ud558\uc138\uc694:"
  }
});

/* ── Giscus Setup ────────────────────────────────────── */
function loadGiscus() {
  const container = document.getElementById('giscus-container');
  const lang = getCurrentLang();

  // Remove existing giscus if any
  container.innerHTML = '';

  const script = document.createElement('script');
  script.src = 'https://giscus.app/client.js';
  script.setAttribute('data-repo', 'saintiron82/imagine');
  script.setAttribute('data-repo-id', ''); // Fill after enabling Discussions
  script.setAttribute('data-category', 'Q&A');
  script.setAttribute('data-category-id', ''); // Fill after creating Q&A category
  script.setAttribute('data-mapping', 'pathname');
  script.setAttribute('data-strict', '0');
  script.setAttribute('data-reactions-enabled', '1');
  script.setAttribute('data-emit-metadata', '0');
  script.setAttribute('data-input-position', 'top');
  script.setAttribute('data-theme', 'dark_dimmed');
  script.setAttribute('data-lang', lang === 'ko' ? 'ko' : 'en');
  script.setAttribute('data-loading', 'lazy');
  script.crossOrigin = 'anonymous';
  script.async = true;

  // If repo-id is empty, show setup notice instead
  if (!script.getAttribute('data-repo-id')) {
    container.innerHTML = `
      <div class="giscus-notice">
        <p>${t('qna.setup_needed')}</p>
        <p><a href="https://giscus.app" target="_blank">giscus.app</a></p>
        <br>
        <p style="font-size: 0.8rem; color: #4b5563;">
          After setup, fill in <code>data-repo-id</code> and <code>data-category-id</code> in qna.html
        </p>
      </div>`;
    return;
  }

  container.appendChild(script);
}

/* ── Language Change → Reload Giscus ─────────────────── */
function onLangChange() {
  loadGiscus();
}

// Auth gate — require login before loading
requireAuth().then(user => {
  if (user) loadGiscus();
});
</script>
</body>
</html>
